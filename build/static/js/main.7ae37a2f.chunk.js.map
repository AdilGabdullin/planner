{"version":3,"sources":["config.ts","slices/artboard.ts","store.ts","components/Grid.tsx","components/Menu.tsx","components/Placement.tsx","components/DropShadow.tsx","components/Border.tsx","components/AppStage.tsx","components/Artboard.tsx","components/Selector.tsx","components/App.tsx","index.tsx"],"names":["FurnitureType","config","ppmArtboard","ppmSelector","width","height","gridStep","padding","furniture","file","size","type","Seat","code","price","name","parts","LeftCorner","RightCorner","Complex","offset","toPixel","x","map","furnitureConfig","image","Image","src","process","console","log","selectorWidth","selectorHeight","round","Math","artboard","slice","createSlice","initialState","placement","drop","id","visible","stageRect","y","magnets","reducers","place","state","action","payload","rotation","ox1","oy1","r","rect","push","selected","move","movementX","movementY","notCornerId","find","undefined","dx","dy","forEach","p","rotate","groupRect","gx","gy","gh","current","rx","ry","rh","rw","setSelected","allIds","i","attached","id1","filter","id2","crop","Util","haveIntersection","conflict","add","ids","xs","result","flatMap","Array","from","Set","length","includes","setStageRect","setDrop","addMagnets","seat","removeMagnets","actions","selectFurniture","selectArtboard","selectPlacement","selectStageRect","selectDrop","selectMagnets","artboardReducer","reducer","store","configureStore","useAppDispatch","useDispatch","useAppSelector","useSelector","Grid","lines","key","stroke","vertical","points","horizontal","rotationIcon","document","createElement","Menu","onRotate","useState","hover","setState","onClick","onMouseEnter","onMouseLeave","radius","strokeWidth","fill","Placement","rectMode","dispatch","start","setStart","grouped","xMin","Infinity","yMin","xMax","yMax","noCorner","getGroupRect","groupWidth","groupHeight","xRange","yRange","e","draggable","onDragStart","target","getClientRect","onDragEnd","dragBoundFunc","pos","toRange","min","max","DropShadow","dropRef","m","defaultProps","ref","l","opacity","closed","Border","AppStage","rectRef","useRef","x1","y1","x2","y2","abs","onMouseDown","stage","KonvaStage","KonvaLine","getLayerXY","onMouseMove","onMouseUp","useStore","evt","clientX","clientY","currentTarget","attrs","container","getBoundingClientRect","Artboard","stageRef","dispatchVisible","useEffect","Dropzone","onDragOver","preventDefault","dropImage","dropzone","Element","layerX","layerY","dropWidth","dropHeight","nearest","distances","nearestI","reduce","minI","value","getNearestMagnet","setAttrs","cos","SQRT2","sin","ox2","oy2","onDrop","onDragLeave","deg2rad","PI","styled","div","Selector","shift","chevrons","outerWrap","innerWidth","direction","outerWidth","displayed","floor","nextShift","handleDragStart","getAttribute","dataTransfer","setDragImage","emptyImage","setEmptyDragImage","handleDragEnd","Carousel","LeftChevron","alt","OuterWrap","InnerWrap","Figure","RightChevron","props","figure","App","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.7ae37a2f.chunk.js","sourcesContent":["export enum FurnitureType {\n    Seat,\n    LeftCorner,\n    RightCorner,\n    Complex,\n}\n\ninterface FurnitureConfig {\n    file: string;\n    size: number[];\n    type: FurnitureType;\n    code: string;\n    price: number;\n    name: string;\n    parts: number[];\n    offset?: number[];\n}\n\nexport const config: {\n    ppmArtboard: number;\n    ppmSelector: number;\n    width: number;\n    height: number;\n    gridStep: number;\n    padding: number;\n    furniture: FurnitureConfig[];\n} = {\n    ppmArtboard: 100,\n    ppmSelector: 40,\n    width: 8.0,\n    height: 6.0,\n    gridStep: 0.2,\n    padding: 0.37,\n    furniture: [\n        {\n            file: \"BS1.png\",\n            size: [0.8, 0.8],\n            type: FurnitureType.Seat,\n            code: \"BS1-A\",\n            price: 799,\n            name: \"(0.8x0.8m)\",\n            parts: [0],\n        },\n        {\n            file: \"BS2.png\",\n            size: [1.6, 0.8],\n            type: FurnitureType.Seat,\n            code: \"BS2-A\",\n            price: 1329,\n            name: \"(1.6x0.8m)\",\n            parts: [1],\n        },\n        {\n            file: \"BS3.png\",\n            size: [2.4, 0.8],\n            type: FurnitureType.Seat,\n            code: \"BS3-A\",\n            price: 1869,\n            name: \"(2.4x0.8m)\",\n            parts: [2],\n        },\n        {\n            file: \"BA1.png\",\n            size: [0.93, 0.93],\n            type: FurnitureType.LeftCorner,\n            code: \"BA1-A\",\n            price: 899,\n            name: \"(0.8x0.8m)\",\n            parts: [3],\n        },\n        {\n            file: \"BA2-L.png\",\n            size: [1.76, 0.93],\n            type: FurnitureType.LeftCorner,\n            code: \"BA2L-A\",\n            price: 1269,\n            name: \"(1.6x0.8m)\",\n            parts: [4],\n        },\n        {\n            file: \"BA2-R.png\",\n            size: [1.76, 0.93],\n            type: FurnitureType.RightCorner,\n            code: \"BA2R-A\",\n            price: 1269,\n            name: \"(1.6x0.8m)\",\n            parts: [5],\n        },\n        {\n            file: \"BS1+BA1.png\",\n            size: [0.93, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS1+BA1\",\n            price: 1698,\n            name: \"(0.8x0.8m)\",\n            parts: [0, 3],\n            offset: [-0.1, -0.11, 0, 0],\n        },\n        {\n            file: \"BS2+BA1.png\",\n            size: [1.7, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS2+BA1\",\n            price: 2228,\n            name: \"(1.6x0.8m)\",\n            parts: [1, 3],\n            offset: [0, -0.13, -0.1, 0],\n        },\n        {\n            file: \"BS2+BA2L.png\",\n            size: [1.76, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS2+BA2L\",\n            price: 2598,\n            name: \"(1.6x0.8m)\",\n            parts: [1, 4],\n            offset: [-0.05, -0.13, -0.11, 0],\n        },\n        {\n            file: \"BS2+BA2R.png\",\n            size: [1.76, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS2+BA2R\",\n            price: 2598,\n            name: \"(1.6x0.8m)\",\n            parts: [1, 5],\n            offset: [-0.1, -0.13, -0.06, 0],\n        },\n        {\n            file: \"BS2+BA1+BA1.png\",\n            size: [1.86, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS2+BA1+BA1\",\n            price: 3127,\n            name: \"(1.6x0.8m)\",\n            parts: [1, 3, 3],\n            offset: [-0.12, -0.11, -0.14, -0.02],\n        },\n        {\n            file: \"BS2+BS2+BA2L.png\",\n            size: [2.55, 1.76],\n            type: FurnitureType.Complex,\n            code: \"BS2+BS2+BA2L\",\n            price: 3927,\n            name: \"(2.4x1.6m)\",\n            parts: [1, 1, 4],\n            offset: [0.01, -0.14, -0.16, -0.02],\n        },\n        {\n            file: \"BS2+BS2+BA2R.png\",\n            size: [2.55, 1.76],\n            type: FurnitureType.Complex,\n            code: \"BS2+BS2+BA2R\",\n            price: 3927,\n            name: \"(2.4x1.6m)\",\n            parts: [1, 1, 5],\n            offset: [-0.16, -0.15, 0, 0],\n        },\n        {\n            file: \"BS3+BA1.png\",\n            size: [2.55, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS3+BA1\",\n            price: 2768,\n            name: \"(2.4x0.8m)\",\n            parts: [2, 3],\n            offset: [-0.14, -0.12, 0, 0],\n        },\n        {\n            file: \"BS3+BA1+BA2R.png\",\n            size: [2.68, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS3+BA1+BA2R\",\n            price: 4037,\n            name: \"(2.4x0.8m)\",\n            parts: [2, 3, 5],\n            offset: [-0.14, -0.12, -0.14, 0],\n        },\n        {\n            file: \"BS3+BA1_flip.png\",\n            size: [2.55, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS3+BA1\",\n            price: 2768,\n            name: \"(2.4x0.8m)\",\n            parts: [2, 3],\n            offset: [0, -0.12, -0.15, 0],\n        },\n        {\n            file: \"BS3+BA2L.png\",\n            size: [2.55, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS3+BA2L\",\n            price: 3138,\n            name: \"(2.4x0.8m)\",\n            parts: [2, 4],\n            offset: [0, -0.12, -0.15, 0],\n        },\n        {\n            file: \"BS3+BA2R.png\",\n            size: [2.55, 0.93],\n            type: FurnitureType.Complex,\n            code: \"BS3+BA2R\",\n            price: 3138,\n            name: \"(2.4x0.8m)\",\n            parts: [2, 5],\n            offset: [-0.14, -0.12, 0, 0],\n        },\n    ],\n};\n","import { config } from \"../config\";\nimport { createSlice, PayloadAction, current } from \"@reduxjs/toolkit\";\nimport { RootState } from \"../store\";\nimport { IRect } from \"konva/lib/types\";\nimport { FurnitureType } from \"../config\";\nimport { Util } from \"konva/lib/Util\";\n\n// config to furniture\nconst toPixel = (x: number) => x * config.ppmArtboard;\nconst furniture = config.furniture.map((furnitureConfig) => {\n    const { size, file, offset } = furnitureConfig;\n    const width = toPixel(size[0]);\n    const height = toPixel(size[1]);\n    const image = new Image();\n    image.width = width;\n    image.height = height;\n    image.src = `${process.env.PUBLIC_URL}/images/${file}`;\n    console.log(image.src);\n    return {\n        ...furnitureConfig,\n        image,\n        width,\n        height,\n        selectorWidth: size[0] * config.ppmSelector,\n        selectorHeight: size[1] * config.ppmSelector,\n        offset: (offset ?? [0, 0, 0, 0]).map(toPixel),\n    };\n});\n\n// config to artboard\nconst width = toPixel(config.width);\nconst height = toPixel(config.height);\nconst gridStep = toPixel(config.gridStep);\nconst padding = toPixel(config.padding);\nconst round = (x: number) => Math.round((x - padding) / gridStep) * gridStep + padding;\nconst artboard = { width, height, gridStep, padding, round };\n\n// slice\nexport interface Placement {\n    id: number;\n    x: number;\n    y: number;\n    rotation: number;\n    selected: boolean;\n    rect: IRect;\n    offset: number[];\n    type: FurnitureType;\n}\nexport interface Magnet {\n    x: number;\n    y: number;\n    rotation: number;\n}\nconst slice = createSlice({\n    name: \"artboard\",\n    initialState: {\n        placement: [] as Placement[],\n        drop: {\n            id: 0,\n            visible: false,\n            type: FurnitureType.Seat,\n        },\n        stageRect: { x: 0, y: 0, width: 0, height: 0 } as IRect,\n        magnets: [] as Magnet[],\n    },\n    reducers: {\n        place: (state, action: PayloadAction<{ id: number; x: number; y: number; rotation?: number }>) => {\n            const { id, x, y, rotation } = action.payload;\n            const { width, height, type, offset } = furniture[id];\n            const [ox1, oy1, ox2, oy2] = offset;\n            const r = ((rotation ?? 0) + 360) % 360;\n            const rect = { x: x - ox1, y: y - oy1, width: width + ox1 + ox2, height: height + oy1 + oy2 };\n            if (r === 90) {\n                rect.x -= height;\n                rect.width += height - width;\n                rect.height += width - height;\n            } else if (r === 180) {\n                rect.y -= height;\n                rect.x -= width;\n            } else if (r === 270) {\n                rect.y -= width;\n                rect.width += height - width;\n                rect.height += width - height;\n            }\n            state.placement.push({\n                id,\n                x: x - ox1,\n                y: y - oy1,\n                rotation: r,\n                selected: false,\n                rect,\n                offset,\n                type,\n            });\n        },\n        move: (state, action: PayloadAction<{ selected: number[]; movementX: number; movementY: number }>) => {\n            const { placement } = state;\n            const { selected, movementX, movementY } = action.payload;\n            const notCornerId = selected.find((id) => {\n                const type = placement[id].type;\n                return type === FurnitureType.Seat || type === FurnitureType.Complex;\n            });\n            if (notCornerId === undefined) return state;\n            const { x, y } = placement[notCornerId].rect;\n            const dx = round(x + movementX) - x;\n            const dy = round(y + movementY) - y;\n            selected.forEach((id) => {\n                const p = placement[id];\n                p.x += dx;\n                p.y += dy;\n                p.rect.x += dx;\n                p.rect.y += dy;\n            });\n        },\n        rotate: (\n            state,\n            action: PayloadAction<{ selected: number[]; groupRect: { x: number; y: number; height: number } }>\n        ) => {\n            const { placement } = state;\n            const { selected, groupRect } = action.payload;\n            const { x: gx, y: gy, height: gh } = groupRect;\n            selected.forEach((id) => {\n                const p = placement[id];\n                const {\n                    rotation,\n                    rect,\n                    offset: [ox1, oy1],\n                } = current(p);\n                const { x: rx, y: ry, height: rh, width: rw } = rect;\n                const dx = gx + gy + gh - rx - ry - rh;\n                const dy = -gx + gy + rx - ry;\n                p.rect.x += dx;\n                p.rect.y += dy;\n                p.rect.height = rw;\n                p.rect.width = rh;\n                p.rotation = (p.rotation + 90) % 360;\n                if (rotation === 0) {\n                    p.x = p.rect.x + rh - ox1 - oy1;\n                    p.y = p.rect.y - oy1 + ox1;\n                } else if (rotation === 90) {\n                    p.x = p.rect.x + rh - ox1 - ox1;\n                    p.y = p.rect.y + rw - oy1 - oy1;\n                } else if (rotation === 180) {\n                    p.x = p.rect.x - ox1 + oy1;\n                    p.y = p.rect.y + rw - oy1 - ox1;\n                } else {\n                    p.x = p.rect.x;\n                    p.y = p.rect.y;\n                }\n            });\n        },\n        setSelected: (state, action: PayloadAction<number[]>) => {\n            const placement = current(state.placement);\n            const allIds = placement.map((p, i) => i);\n            const conflict = (id1: number, id2: number) => {\n                const t = 4;\n                const crop = ({ x, y, width, height }: IRect) => ({\n                    x: x + t,\n                    y: y + t,\n                    width: width - 2 * t,\n                    height: height - 2 * t,\n                });\n                return Util.haveIntersection(crop(placement[id1].rect), crop(placement[id2].rect));\n            };\n            const attached = (id1: number) => allIds.filter((id2) => conflict(id1, id2));\n            const unique = (xs: number[]) => Array.from(new Set(xs));\n            const add = (ids: number[]): number[] => {\n                const result = unique(ids.flatMap(attached));\n                return result.length === ids.length ? result : add(result);\n            };\n            const selected = add(action.payload);\n            for (let id = 0; id < placement.length; id++) {\n                state.placement[id].selected = selected.includes(id);\n            }\n        },\n        setStageRect: (state, action: PayloadAction<IRect>) => {\n            state.stageRect = action.payload;\n        },\n        setDrop: (state, action: PayloadAction<{ id?: number; visible?: boolean }>) => {\n            const { id, visible } = action.payload;\n            if (id !== undefined) {\n                state.drop.id = id;\n                state.drop.type = furniture[id].type;\n            }\n            if (visible !== undefined) state.drop.visible = visible;\n        },\n        addMagnets: (state) => {\n            const seats = state.placement.filter((p) => p.type === FurnitureType.Seat);\n            seats.forEach((seat) => {\n                const { x, y, width, height } = seat.rect;\n                state.magnets.push(\n                    { x, y, rotation: 0 },\n                    { x: x + width, y, rotation: 90 },\n                    { x: x + width, y: y + height, rotation: 180 },\n                    { x, y: y + height, rotation: 270 }\n                );\n            });\n        },\n        removeMagnets: (state) => {\n            state.magnets = [];\n        },\n    },\n});\n\n// actions\nexport const { place, move, rotate, setSelected, setStageRect, setDrop, addMagnets, removeMagnets } = slice.actions;\n// selectors\nexport const selectFurniture = (state: RootState) => furniture;\nexport const selectArtboard = (state: RootState) => artboard;\nexport const selectPlacement = (state: RootState) => state.artboard.placement;\nexport const selectStageRect = (state: RootState) => state.artboard.stageRect;\nexport const selectDrop = (state: RootState) => state.artboard.drop;\nexport const selectMagnets = (state: RootState) => state.artboard.magnets;\n// reducer\nexport const artboardReducer = slice.reducer;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport { artboardReducer } from \"./slices/artboard\";\n\nexport const store = configureStore({\n    reducer: {\n        artboard: artboardReducer,\n    },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { LineConfig } from \"konva/lib/shapes/Line\";\nimport { Line } from \"react-konva\";\nimport { selectArtboard } from \"../slices/artboard\";\nimport { useAppSelector } from \"../store\";\n\nconst darkGrey = \"#999999\";\nconst lightGrey = \"#cccccc\";\n\nexport function Grid() {\n    const { width, height, gridStep, padding: p } = useAppSelector(selectArtboard);\n    const lines: LineConfig[] = [];\n    let key = 0;\n    let stroke = lightGrey;\n    const vertical = (x: number) => <Line key={key} stroke={stroke} x={x} y={p} points={[0, -1, 0, height + 1]} />;\n    const horizontal = (y: number) => <Line key={key} stroke={stroke} x={p} y={y} points={[-1, 0, width + 1, 0]} />;\n    for (let x = p; x <= width + p; key += 1, x += gridStep) lines.push(vertical(x));\n    for (let y = p; y <= height + p; key += 1, y += gridStep) lines.push(horizontal(y));\n    stroke = darkGrey;\n    for (let x = p; x <= width + p; key += 1, x += gridStep * 5) lines.push(vertical(x));\n    for (let y = p; y <= height + p; key += 1, y += gridStep * 5) lines.push(horizontal(y));\n    return <>{lines}</>;\n}\n","import { useState } from \"react\";\nimport { Circle, Group, Image } from \"react-konva\";\n\nconst rotationIcon = document.createElement(\"img\");\nrotationIcon.src = `${process.env.PUBLIC_URL}/images/icons/rotate.svg`;\n\nexport function Menu({ x, y, onRotate }: { x: number; y: number; onRotate: () => void }) {\n    const size = 30;\n    const [state, setState] = useState({ hover: false });\n    const { hover } = state;\n\n    return (\n        <Group\n            onClick={onRotate}\n            onMouseEnter={() => setState({ hover: true })}\n            onMouseLeave={() => setState({ hover: false })}\n        >\n            <Circle\n                x={x - (size * 3) / 4}\n                y={y + size / 2}\n                radius={size / 2}\n                stroke={hover ? \"#f5f5f5\" : \"black\"}\n                strokeWidth={1}\n                fill={hover ? \"#f5f5f5\" : \"white\"}\n            />\n            <Image x={x - size * 1.15} y={y + size * 0.1} image={rotationIcon} width={size * 0.8} height={size * 0.8} />\n        </Group>\n    );\n}\n","import {\n    move,\n    rotate,\n    setSelected,\n    selectPlacement,\n    selectFurniture,\n    selectStageRect,\n    selectArtboard,\n} from \"../slices/artboard\";\nimport { Group, Image, Rect } from \"react-konva\";\nimport { KonvaEventObject } from \"konva/lib/Node\";\nimport { useAppSelector } from \"../store\";\nimport { useDispatch } from \"react-redux\";\nimport { useState } from \"react\";\nimport { Vector2d } from \"konva/lib/types\";\nimport { Menu } from \"./Menu\";\nimport { Placement as PlacementType } from \"../slices/artboard\";\nimport { FurnitureType } from \"../config\";\n\ntype KEO = KonvaEventObject<globalThis.DragEvent>;\n\nexport function Placement({ rectMode }: { rectMode: boolean }) {\n    const dispatch = useDispatch();\n    const { padding, round } = useAppSelector(selectArtboard);\n    const furniture = useAppSelector(selectFurniture);\n    const placement = useAppSelector(selectPlacement);\n    const stageRect = useAppSelector(selectStageRect);\n    const [start, setStart] = useState({ x: 0, y: 0 });\n    const grouped = placement.filter((p) => p.selected);\n    const selected: number[] = [];\n    placement.forEach((p, i) => {\n        if (p.selected) selected.push(i);\n    });\n    const groupRect = getGroupRect(grouped, round);\n    const groupWidth = groupRect.width;\n    const groupHeight = groupRect.height;\n    const xRange = [\n        stageRect.x + padding - groupRect.x,\n        stageRect.x + stageRect.width - groupWidth - padding - groupRect.x,\n    ];\n    const yRange = [padding - groupRect.y, stageRect.height - groupHeight - padding - groupRect.y];\n    const dragBoundFunc = (pos: Vector2d) => {\n        return {\n            x: toRange(pos.x, xRange),\n            y: toRange(pos.y, yRange),\n        };\n    };\n    const onDragStart = (e: KEO) => {\n        const { x, y } = e.target.getClientRect();\n        setStart({ x, y });\n    };\n    const onDragEnd = (e: KEO) => {\n        const { x, y } = e.target.getClientRect();\n        dispatch(move({ selected, movementX: x - start.x, movementY: y - start.y }));\n        dispatch(setSelected([]));\n        dispatch(setSelected(selected));\n    };\n    const onRotate = () => {\n        dispatch(rotate({ selected, groupRect }));\n    };\n    const onMouseEnter = (id: number) => (e: KEO) => {\n        if (rectMode) return;\n        dispatch(setSelected([id]));\n    };\n    return (\n        <>\n            {/* {placement.map(({ rect: { x, y, width, height } }, key) => {\n                return <Rect stroke=\"cyan\" {...{ x, y, width, height, key }} />;\n            })} */}\n            {placement.map(({ id, x, y, rotation, selected }, key) => {\n                if (selected && !rectMode) return null;\n                const offset = furniture[id].offset;\n                return (\n                    <Image\n                        {...{ key, x: x + offset[0], y: y + offset[1], rotation }}\n                        image={furniture[id].image}\n                        onMouseEnter={onMouseEnter(key)}\n                    />\n                );\n            })}\n            {grouped.length > 0 && !rectMode && (\n                <Group draggable {...{ onDragStart, onDragEnd, dragBoundFunc }}>\n                    {grouped.map(({ id, x, y, rotation }, key) => {\n                        const offset = furniture[id].offset;\n                        return (\n                            <Image\n                                {...{ key, x: x + offset[0], y: y + offset[1], rotation }}\n                                image={furniture[id].image}\n                            />\n                        );\n                    })}\n                    {groupRect.visible && <Rect {...groupRect} stroke=\"black\" />}\n                    <Menu x={groupRect.x} y={groupRect.y} onRotate={onRotate} />\n                </Group>\n            )}\n        </>\n    );\n}\n\nfunction toRange(x: number, [min, max]: number[]) {\n    if (x < min) return min;\n    if (x > max) return max;\n    return x;\n}\n\nfunction getGroupRect(grouped: PlacementType[], round: (x: number) => number) {\n    let xMin = Infinity;\n    let yMin = Infinity;\n    let xMax = -Infinity;\n    let yMax = -Infinity;\n    const noCorner = (p: PlacementType) => p.type === FurnitureType.Seat || p.type === FurnitureType.Complex;\n    for (const p of grouped.filter(noCorner)) {\n        const { x, y, width, height } = p.rect;\n        if (x < xMin) xMin = x;\n        if (y < yMin) yMin = y;\n        if (x + width > xMax) xMax = x + width;\n        if (y + height > yMax) yMax = y + height;\n    }\n    const x = round(xMin);\n    const y = round(yMin);\n    return {\n        x,\n        y,\n        width: round(xMax) - x,\n        height: round(yMax) - y,\n        visible: grouped.length > 0,\n    };\n}\n","import { Image as KonvaImage } from \"konva/lib/shapes/Image\";\nimport { Image, Line } from \"react-konva\";\nimport { useAppSelector } from \"../store\";\nimport { selectFurniture, selectDrop, selectMagnets } from \"../slices/artboard\";\n\nexport function DropShadow({ dropRef }: { dropRef: React.RefObject<KonvaImage> }) {\n    const { id, visible } = useAppSelector(selectDrop);\n    const furniture = useAppSelector(selectFurniture);\n    const magnets = useAppSelector(selectMagnets);\n    if (!visible) return null;\n    const image = furniture[id].image;\n    return (\n        <>\n            {magnets.map((m, key) => (\n                <Line {...defaultProps} {...m} key={key} />\n            ))}\n            <Image ref={dropRef} y={-200} image={image} />\n        </>\n    );\n}\n\nconst l = 36;\nconst defaultProps = {\n    points: [0, 0, l, 0, l, l / 2, l * 0.5, l / 2, l * 0.5, l, 0, l],\n    fill: \"#00FF00\",\n    opacity: 0.5,\n    strokeWidth: 0,\n    closed: true,\n};\n","import { Line } from \"react-konva\";\nimport { selectArtboard, selectDrop } from \"../slices/artboard\";\nimport { useAppSelector } from \"../store\";\n\nexport function Border() {\n    const drop = useAppSelector(selectDrop);\n    const { width, height, padding: p } = useAppSelector(selectArtboard);\n    if (!drop.visible) return null;\n    return (\n        <>\n            <Line x={p} y={p} stroke=\"black\" points={[0, -1, 0, height + 1]} />\n            <Line x={p} y={p} stroke=\"black\" points={[-1, 0, width, 0]} />\n            <Line x={p} y={p + height} stroke=\"black\" points={[-1, 0, width, 0]} />\n            <Line x={p + width} y={p} stroke=\"black\" points={[0, -1, 0, height + 1]} />\n        </>\n    );\n}\n","import { useRef, useState } from \"react\";\nimport { Stage, Layer, Rect } from \"react-konva\";\nimport { Provider, useStore } from \"react-redux\";\nimport { Grid } from \"./Grid\";\nimport { Placement } from \"./Placement\";\nimport { DropShadow } from \"./DropShadow\";\nimport { Border } from \"./Border\";\nimport { Util } from \"konva/lib/Util\";\nimport { Image as KonvaImage } from \"konva/lib/shapes/Image\";\nimport { Rect as KonvaRect } from \"konva/lib/shapes/Rect\";\nimport { Line as KonvaLine } from \"konva/lib/shapes/Line\";\nimport { Stage as KonvaStage } from \"konva/lib/Stage\";\nimport { KonvaEventObject } from \"konva/lib/Node\";\nimport { useAppDispatch, useAppSelector } from \"../store\";\nimport { selectArtboard, selectPlacement, setSelected } from \"../slices/artboard\";\n\nexport function AppStage({ dropRef }: { dropRef: React.RefObject<KonvaImage> }) {\n    const dispatch = useAppDispatch();\n    const rectRef = useRef<KonvaRect>(null);\n    const placement = useAppSelector(selectPlacement);\n    const initialState = { x1: 0, y1: 0, x2: 0, y2: 0, rectMode: false };\n    const [{ x1, y1, x2, y2, rectMode }, setState] = useState(initialState);\n    const rect = { x: Math.min(x1, x2), y: Math.min(y1, y2), width: Math.abs(x2 - x1), height: Math.abs(y2 - y1) };\n    const { width, height, padding } = useAppSelector(selectArtboard);\n    const onMouseDown = (e: KonvaEventObject<MouseEvent>) => {\n        const stage = e.target;\n        if (!(stage instanceof KonvaStage || stage instanceof KonvaLine)) return;\n        const { x, y } = getLayerXY(e);\n        setState({ x1: x, y1: y, x2: x, y2: y, rectMode: true });\n        dispatch(setSelected([]));\n    };\n    const onMouseMove = (e: KonvaEventObject<MouseEvent>) => {\n        if (!rectMode) return;\n        const { x, y } = getLayerXY(e);\n        setState({ x1, y1, x2: x, y2: y, rectMode: true });\n    };\n    const onMouseUp = (e: KonvaEventObject<MouseEvent>) => {\n        if (!rectMode) return;\n        const selected: number[] = [];\n        placement.forEach((p, i) => {\n            if (Util.haveIntersection(rect, p.rect)) selected.push(i);\n        });\n        dispatch(setSelected(selected));\n        setState(initialState);\n    };\n\n    return (\n        <Stage {...{ onMouseDown, onMouseMove, onMouseUp }} width={width + 2 * padding} height={height + 2 * padding}>\n            <Provider store={useStore()}>\n                <Layer>\n                    <Grid />\n                    <Border />\n                    <Placement rectMode={rectMode} />\n                    <DropShadow dropRef={dropRef} />\n                    <Rect {...rect} ref={rectRef} fill=\"rgba(0,0,255,0.5)\" visible={rectMode} />\n                </Layer>\n            </Provider>\n        </Stage>\n    );\n}\n\nfunction getLayerXY(e: KonvaEventObject<MouseEvent>) {\n    const { clientX, clientY } = e.evt;\n    const { x, y } = e.currentTarget.attrs.container.getBoundingClientRect();\n    return {\n        x: clientX - x,\n        y: clientY - y,\n    };\n}\n","import { Image as KonvaImage } from \"konva/lib/shapes/Image\";\nimport { useAppDispatch, useAppSelector } from \"../store\";\nimport {\n    place,\n    setDrop,\n    selectArtboard,\n    selectFurniture,\n    selectDrop,\n    setStageRect,\n    selectStageRect,\n    selectMagnets,\n    Magnet,\n} from \"../slices/artboard\";\nimport { DragEventHandler, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { AppStage } from \"./AppStage\";\nimport { FurnitureType } from \"../config\";\n\nexport function Artboard() {\n    const dispatch = useAppDispatch();\n    const { round, padding } = useAppSelector(selectArtboard);\n    const stageRef = useRef<HTMLDivElement>(null);\n    const stageRect = useAppSelector(selectStageRect);\n    const drop = useAppSelector(selectDrop);\n    const furniture = useAppSelector(selectFurniture);\n    const dropRef = useRef<KonvaImage>(null);\n    const magnets = useAppSelector(selectMagnets);\n    const dispatchVisible = (visible: boolean) => {\n        if (drop.visible !== visible) dispatch(setDrop({ visible }));\n    };\n    useEffect(() => {\n        if (stageRef.current === null) return;\n        const { x, y, width, height } = stageRef.current.getBoundingClientRect();\n        if (stageRect.x === x && stageRect.width === width) return;\n        dispatch(setStageRect({ x, y, width, height }));\n    });\n    const onDragOver: DragEventHandler = (e) => {\n        e.preventDefault();\n        const dropImage = dropRef.current;\n        const dropzone = e.target;\n        if (dropImage === null || !(dropzone instanceof Element)) {\n            dispatchVisible(true);\n            return;\n        }\n        const { x, y, width, height } = dropzone.getBoundingClientRect();\n        const layerX = e.clientX - x;\n        const layerY = e.clientY - y;\n        const dropWidth = furniture[drop.id].width;\n        const dropHeight = furniture[drop.id].height;\n        const { type } = drop;\n        if (type === FurnitureType.Seat || type === FurnitureType.Complex) {\n            const { offset } = furniture[drop.id];\n            const [ox1, oy1, ox2, oy2] = offset;\n            // mutate ref object\n            dropImage.setAttrs({\n                x: round(toRange(layerX, [padding, width - padding - dropWidth - ox1 - ox2])) + ox1,\n                y: round(toRange(layerY, [padding, height - padding - dropHeight - oy1 - oy2])) + oy1,\n            });\n            return;\n        }\n        const nearest = getNearestMagnet(layerX, layerY, magnets);\n        if (type === FurnitureType.LeftCorner) {\n            const { x, y, rotation } = nearest;\n            // mutate ref object\n            dropImage.setAttrs({\n                x: x + cos(rotation - 135) * 12 * Math.SQRT2,\n                y: y + sin(rotation - 135) * 12 * Math.SQRT2,\n                rotation,\n            });\n            return;\n        }\n        if (type === FurnitureType.RightCorner) {\n            const { x, y, rotation } = nearest;\n            // mutate ref object\n            dropImage.setAttrs({\n                x: x + cos(rotation - 135) * 12 * Math.SQRT2 + sin(-rotation) * dropWidth,\n                y: y + sin(rotation - 135) * 12 * Math.SQRT2 + cos(-rotation) * dropWidth,\n                rotation: rotation - 90,\n            });\n            return;\n        }\n    };\n    const onDragLeave: DragEventHandler = (e) => {\n        dispatchVisible(false);\n    };\n    const onDrop: DragEventHandler = (e) => {\n        e.preventDefault();\n        const dropImage = dropRef.current;\n        if (dropImage === null) return;\n        const { x, y, rotation } = dropImage.attrs;\n        dispatch(place({ id: drop.id, x, y, rotation }));\n    };\n    return (\n        <Dropzone ref={stageRef} onDragOver={onDragOver} onDrop={onDrop} onDragLeave={onDragLeave}>\n            <AppStage dropRef={dropRef} />\n        </Dropzone>\n    );\n}\n\nfunction toRange(x: number, [min, max]: number[]) {\n    if (x < min) return min;\n    if (x > max) return max;\n    return x;\n}\n\nconst deg2rad = Math.PI / 180;\n\nfunction cos(x: number) {\n    return Math.cos(x * deg2rad);\n}\n\nfunction sin(x: number) {\n    return Math.sin(x * deg2rad);\n}\n\nfunction getNearestMagnet(layerX: number, layerY: number, magnets: Magnet[]) {\n    const distances = magnets.map((m) => {\n        const dx = layerX - m.x;\n        const dy = layerY - m.y;\n        return dx * dx + dy * dy;\n    });\n    const nearestI = distances.reduce((minI, value, i): number => (distances[minI] > value ? i : minI), 0);\n    return magnets[nearestI];\n}\nconst Dropzone = styled.div`\n    display: table;\n`;\n","import { useState, useRef, DragEventHandler, DragEvent } from \"react\";\nimport styled from \"styled-components\";\nimport { useAppDispatch, useAppSelector } from \"../store\";\nimport { selectFurniture, setDrop, addMagnets, removeMagnets, setSelected } from \"../slices/artboard\";\nimport { FurnitureType } from \"../config\";\n\nexport function Selector() {\n    // state\n    const [state, setState] = useState({\n        shift: 0,\n        chevrons: [false, true],\n    });\n    const size = 143;\n    const furniture = useAppSelector(selectFurniture);\n    const outerWrap = useRef<HTMLDivElement>(null);\n    const innerWidth = size * furniture.length;\n\n    // events\n    const dispatch = useAppDispatch();\n    const move = (direction: number) => {\n        if (null === outerWrap.current) return;\n        const outerWidth = outerWrap.current.getBoundingClientRect().width;\n        const displayed = Math.floor(outerWidth / size);\n        const min = -innerWidth + displayed * size;\n        let nextShift = state.shift + displayed * size * direction;\n        if (nextShift > 0) nextShift = 0;\n        if (nextShift < min) nextShift = min;\n        setState({ shift: nextShift, chevrons: [nextShift !== 0, nextShift !== min] });\n    };\n    const handleDragStart: DragEventHandler = (e) => {\n        const { target } = e;\n        if (!(target instanceof Element)) return;\n        const id = target.getAttribute(\"data-furniture-id\");\n        if (id === null) return;\n        setEmptyDragImage(e);\n        dispatch(setDrop({ id: +id }));\n        dispatch(setSelected([]));\n        const type = furniture[+id].type;\n        if (type === FurnitureType.LeftCorner || type === FurnitureType.RightCorner) {\n            dispatch(addMagnets());\n        }\n    };\n    const handleDragEnd: DragEventHandler = (e) => {\n        dispatch(setDrop({ visible: false }));\n        dispatch(removeMagnets());\n    };\n    return (\n        <Carousel>\n            <LeftChevron visible={state.chevrons[0]}>\n                <img src={`${process.env.PUBLIC_URL}/images/icons/arrow.svg`} alt=\"left\" onClick={() => move(1)} />\n            </LeftChevron>\n            <OuterWrap ref={outerWrap}>\n                <InnerWrap width={innerWidth} shift={state.shift}>\n                    {furniture.map(({ file, name, code, price, selectorWidth }, i) => (\n                        <Figure\n                            key={i}\n                            draggable=\"true\"\n                            onDragStart={handleDragStart}\n                            onDragEnd={handleDragEnd}\n                            data-furniture-id={i}\n                        >\n                            <img src={`${process.env.PUBLIC_URL}/images/${file}`} alt={name} width={selectorWidth} data-furniture-id={i} />\n                            <figcaption>\n                                {name} <br /> {code} <br /> {price} EUR{\" \"}\n                            </figcaption>\n                        </Figure>\n                    ))}\n                </InnerWrap>\n            </OuterWrap>\n            <RightChevron visible={state.chevrons[1]}>\n                <img src={`${process.env.PUBLIC_URL}/images/icons/arrow.svg`} alt=\"right\" onClick={() => move(-1)} />\n            </RightChevron>\n        </Carousel>\n    );\n}\n\nconst emptyImage = new Image();\nemptyImage.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\nfunction setEmptyDragImage(e: DragEvent) {\n    e.dataTransfer.setDragImage(emptyImage, 0, 0);\n}\n\nconst Carousel = styled.div`\n    display: flex;\n`;\n\nconst LeftChevron = styled.div<{ visible: boolean }>`\n    transform: rotate(180deg);\n    align-self: center;\n    opacity: ${(props) => (props.visible ? 1 : 0)};\n`;\n\nconst RightChevron = styled(LeftChevron)`\n    transform: none;\n`;\n\nconst OuterWrap = styled.div`\n    margin: 0 5px;\n    overflow: hidden;\n`;\n\nconst InnerWrap = styled.div<{ width: number; shift: number }>`\n    transition: transform 1s;\n    margin: 20px -15px;\n    width: ${(props) => props.width}px;\n    transform: translateX(${(props) => props.shift}px);\n`;\n\nconst Figure = styled.figure`\n    display: block;\n    position: relative;\n    width: 113px;\n    height: 141px;\n    float: left;\n    margin: 0 15px;\n    text-align: center;\n    background-color: #f7f7f7;\n    text-align: left;\n    figcaption {\n        position: absolute;\n        font: 12px AtlasGrotesk-Regular;\n        left: 2px;\n        bottom: 3px;\n    }\n`;\n","import { Artboard } from \"./Artboard\";\nimport { Selector } from \"./Selector\";\n\nexport function App() {\n    return (\n        <>\n            <Selector />\n            <Artboard />\n        </>\n    );\n}\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { App } from \"./components/App\";\nimport { store } from \"./store\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}